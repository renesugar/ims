<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

    <div id="columns"></div>
    <script src="/static/jquery.min.js" charset="utf-8"></script>
    <script type="text/javascript">
      $(document).ready(function() {

        function createFigure(filename, width, method) {
          var figure = $("<figure>");

          var figcaption = $("<figcaption>");
          var dl = $("<dl>");

          dl.css("display", "none")

          dl.append($("<dt>").text("Filename"));
          dl.append($("<dd>").text(filename));
          dl.append($("<dt>").text("Width"));
          dl.append($("<dd>").text(width + "px"));
          dl.append($("<dt>").text("Method"));
          dl.append($("<dd>").text(method));

          figcaption.append(dl);

          var img = $("<img>", {src: "/resize/" + filename + "?w=" + width + "&m=" + method});

          img.one("load", function() {
            console.log("Loaded:", filename, width, method);
            dl.css("display", "block")
          });

          figure.append(img);
          figure.append(figcaption);

          $("#columns").append(figure);
        }

        var methods = ["imagick"];

        for (var j = 0; j < methods.length; j++) {
          for (var i = 1; i <= 9; i++) {
            createFigure(i + ".jpg", "350", methods[j]);
          }
        }

      });
    </script>
</body>

</html>
